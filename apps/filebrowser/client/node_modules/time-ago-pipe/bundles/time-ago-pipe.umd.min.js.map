{
  "version": 3,
  "file": "time-ago-pipe.umd.min.js",
  "sources": [
    "ng://time-ago-pipe/out/time-ago.pipe.ts"
  ],
  "sourcesContent": [
    "import {Pipe, PipeTransform, NgZone, ChangeDetectorRef, OnDestroy} from \"@angular/core\";\r\n@Pipe({\r\n\tname:'timeAgo',\r\n\tpure:false\r\n})\r\nexport class TimeAgoPipe implements PipeTransform, OnDestroy {\r\n\tprivate timer: number;\r\n\tconstructor(private changeDetectorRef: ChangeDetectorRef, private ngZone: NgZone) {}\r\n\ttransform(value:string) {\r\n\t\tthis.removeTimer();\r\n\t\tlet d = new Date(value);\r\n\t\tlet now = new Date();\r\n\t\tlet seconds = Math.round(Math.abs((now.getTime() - d.getTime())/1000));\r\n\t\tlet timeToUpdate = (Number.isNaN(seconds)) ? 1000 : this.getSecondsUntilUpdate(seconds) *1000;\r\n\t\tthis.timer = this.ngZone.runOutsideAngular(() => {\r\n\t\t\tif (typeof window !== 'undefined') {\r\n\t\t\t\treturn window.setTimeout(() => {\r\n\t\t\t\t\tthis.ngZone.run(() => this.changeDetectorRef.markForCheck());\r\n\t\t\t\t}, timeToUpdate);\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t});\r\n\t\tlet minutes = Math.round(Math.abs(seconds / 60));\r\n\t\tlet hours = Math.round(Math.abs(minutes / 60));\r\n\t\tlet days = Math.round(Math.abs(hours / 24));\r\n\t\tlet months = Math.round(Math.abs(days/30.416));\r\n\t\tlet years = Math.round(Math.abs(days/365));\r\n\t\tif (Number.isNaN(seconds)){\r\n\t\t\treturn '';\r\n\t\t} else if (seconds <= 45) {\r\n\t\t\treturn 'a few seconds ago';\r\n\t\t} else if (seconds <= 90) {\r\n\t\t\treturn 'a minute ago';\r\n\t\t} else if (minutes <= 45) {\r\n\t\t\treturn minutes + ' minutes ago';\r\n\t\t} else if (minutes <= 90) {\r\n\t\t\treturn 'an hour ago';\r\n\t\t} else if (hours <= 22) {\r\n\t\t\treturn hours + ' hours ago';\r\n\t\t} else if (hours <= 36) {\r\n\t\t\treturn 'a day ago';\r\n\t\t} else if (days <= 25) {\r\n\t\t\treturn days + ' days ago';\r\n\t\t} else if (days <= 45) {\r\n\t\t\treturn 'a month ago';\r\n\t\t} else if (days <= 345) {\r\n\t\t\treturn months + ' months ago';\r\n\t\t} else if (days <= 545) {\r\n\t\t\treturn 'a year ago';\r\n\t\t} else { // (days > 545)\r\n\t\t\treturn years + ' years ago';\r\n\t\t}\r\n\t}\r\n\tngOnDestroy(): void {\r\n\t\tthis.removeTimer();\r\n\t}\r\n\tprivate removeTimer() {\r\n\t\tif (this.timer) {\r\n\t\t\twindow.clearTimeout(this.timer);\r\n\t\t\tthis.timer = null;\r\n\t\t}\r\n\t}\r\n\tprivate getSecondsUntilUpdate(seconds:number) {\r\n\t\tlet min = 60;\r\n\t\tlet hr = min * 60;\r\n\t\tlet day = hr * 24;\r\n\t\tif (seconds < min) { // less than 1 min, update every 2 secs\r\n\t\t\treturn 2;\r\n\t\t} else if (seconds < hr) { // less than an hour, update every 30 secs\r\n\t\t\treturn 30;\r\n\t\t} else if (seconds < day) { // less then a day, update every 5 mins\r\n\t\t\treturn 300;\r\n\t\t} else { // update every hour\r\n\t\t\treturn 3600;\r\n\t\t}\r\n\t}\r\n}"
  ],
  "names": [
    "this",
    "changeDetectorRef",
    "ngZone",
    "_this",
    "removeTimer",
    "d",
    "Date",
    "value",
    "now",
    "seconds",
    "Math",
    "round",
    "abs",
    "getTime",
    "timeToUpdate",
    "Number",
    "isNaN",
    "getSecondsUntilUpdate",
    "timer",
    "runOutsideAngular",
    "window",
    "setTimeout",
    "run",
    "markForCheck",
    "minutes",
    "hours",
    "days",
    "months",
    "years",
    "TimeAgoPipe",
    "prototype",
    "ngOnDestroy",
    "clearTimeout",
    "min",
    "hr",
    "decorators",
    "type",
    "Pipe",
    "args",
    "name",
    "pure",
    "ctorParameters",
    "ChangeDetectorRef"
  ],
  "mappings": "yRAOAA,KAAAC,kBAAyDA,EAApCD,KAArBE,OAAAA,2CACA,IAAAC,EAAAH,KACEA,KAAKI,cACL,IAAIC,EAAI,IAAIC,KAAKC,GACbC,EAAM,IAAIF,KACVG,EAAUC,KAAKC,MAAMD,KAAKE,KAAKJ,EAAIK,UAAYR,EAAEQ,WAAW,MAC5DC,EAAgBC,OAAOC,MAAMP,GAAY,IAA4C,IAArCT,KAAKiB,sBAAsBR,GAC/ET,KAAKkB,MAAQlB,KAAKE,OAAOiB,kBAAkB,WAC1C,MAAsB,oBAAXC,OACHA,OAAOC,WAAW,WACxBlB,EAALD,OAAAoB,IAAA,WAAA,OAAAnB,EAAiDF,kBAAjDsB,kBACOT,GAEG,OAER,IAAIU,EAAUd,KAAKC,MAAMD,KAAKE,IAAIH,EAAU,KACxCgB,EAAQf,KAAKC,MAAMD,KAAKE,IAAIY,EAAU,KACtCE,EAAOhB,KAAKC,MAAMD,KAAKE,IAAIa,EAAQ,KACnCE,EAASjB,KAAKC,MAAMD,KAAKE,IAAIc,EAAK,SAClCE,EAAQlB,KAAKC,MAAMD,KAAKE,IAAIc,EAAK,MACrC,OAAIX,OAAOC,MAAMP,GACT,GACGA,GAAW,GACd,oBACGA,GAAW,GACd,eACGe,GAAW,GACdA,EAAU,eACPA,GAAW,GACd,cACGC,GAAS,GACZA,EAAQ,aACLA,GAAS,GACZ,YACGC,GAAQ,GACXA,EAAO,YACJA,GAAQ,GACX,cACGA,GAAQ,IACXC,EAAS,cACND,GAAQ,IACX,aAEAE,EAAQ,cAGjBC,EAADC,UAAAC,YAAA,WACE/B,KAAKI,eAEEyB,EAATC,UAAA1B,YAAA,WACMJ,KAAKkB,QACRE,OAAOY,aAAahC,KAAKkB,OACzBlB,KAAKkB,MAAQ,OAGPW,EAATC,UAA+Bb,sBAA/B,SAAAR,GAIE,OAAIA,EAHM,GAIF,EACGA,EAJFwB,KAKD,GACGxB,EALDyB,MAMF,IAEA,WAxEVL,EAACM,aACDC,KAAAC,EAAAA,KAAAC,OACCC,KAAK,UACNC,MAAA,MAJAX,EAAqCY,eAAiB,WAAtD,QAAAL,KAA6BM,EAAAA"
}
